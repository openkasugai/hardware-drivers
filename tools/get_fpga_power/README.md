# get_fpga_power
### Version:1.0.0

## Build
- Need to build libfpga at first.
- When libfpga is not build, build libfpga by `make` in this repository as follows:
	- make dpdk(Inastall DPDK)
	- make mcap(Build MCAP)
	- make json(Get parson)
	- make(Build libfpga)
```
make
```

## Tested version
- driver：v1.0.0-0
- libfpga：v1.0.0-0


## Execute
```sh
./get_fpga_power -d <device file> [-- -i <interval>]
```

### Argument
|short|long|argument|description|
|-|-|-|-|
|-i|--interval|required|Interval for getting power(default:100[ms])|

## Example
- Command and Output
	- You can finish this app by `Ctrl+C`.

```sh
$ ./get_fpga_power -d /dev/xpcie_21320621V01M
Timestamp, Elapsed time[ms], pcie_12V_voltage[V], pcie_12V_current[A], pcie_12V_power[W], aux_12V_voltage[V], aux_12V_current[A], aux_12V_power[W], total_power(12V)[W], PEX_3V3_voltage[V], PEX_3V3_current[A], PEX_3V3_power[W], AUX_3V3_voltage[V], AUX_3V3_current[A], VCCINT_voltage[V], VCCINT_current[A]
2024/09/04 14:08:51.640, 0, 12.062, 1.635, 19.721, 12.097, 1.393, 16.851, 36.572, 3.360, 0.000, 0.000, 3.323, 0.000, 0.850, 13.434
2024/09/04 14:08:51.740, 100, 12.062, 1.635, 19.721, 12.097, 1.393, 16.851, 36.572, 3.360, 0.000, 0.000, 3.323, 0.000, 0.850, 13.434
2024/09/04 14:08:51.840, 200, 12.062, 1.635, 19.721, 12.097, 1.393, 16.851, 36.572, 3.360, 0.000, 0.000, 3.323, 0.000, 0.850, 13.434
2024/09/04 14:08:51.940, 300, 12.062, 1.635, 19.721, 12.097, 1.393, 16.851, 36.572, 3.360, 0.000, 0.000, 3.323, 0.000, 0.850, 13.434
2024/09/04 14:08:52.040, 401, 12.062, 1.635, 19.721, 12.097, 1.393, 16.851, 36.572, 3.360, 0.000, 0.000, 3.323, 0.000, 0.850, 13.434
2024/09/04 14:08:52.141, 501, 12.062, 1.635, 19.721, 12.097, 1.393, 16.851, 36.572, 3.360, 0.000, 0.000, 3.323, 0.000, 0.850, 13.434
2024/09/04 14:08:52.241, 602, 12.062, 1.635, 19.721, 12.097, 1.393, 16.851, 36.572, 3.360, 0.000, 0.000, 3.323, 0.000, 0.850, 13.434
2024/09/04 14:08:52.341, 702, 12.062, 1.635, 19.721, 12.097, 1.393, 16.851, 36.572, 3.360, 0.000, 0.000, 3.323, 0.000, 0.850, 13.434
2024/09/04 14:08:52.441, 802, 12.062, 1.635, 19.721, 12.097, 1.393, 16.851, 36.572, 3.360, 0.000, 0.000, 3.323, 0.000, 0.850, 13.434
2024/09/04 14:08:52.541, 902, 12.062, 1.635, 19.721, 12.097, 1.393, 16.851, 36.572, 3.360, 0.000, 0.000, 3.323, 0.000, 0.850, 13.434
^C
```

```sh
$ ./get_fpga_power -d /dev/xpcie_21320621V01M -- -i 1000
Timestamp, Elapsed time[ms], pcie_12V_voltage[V], pcie_12V_current[A], pcie_12V_power[W], aux_12V_voltage[V], aux_12V_current[A], aux_12V_power[W], total_power(12V)[W], PEX_3V3_voltage[V], PEX_3V3_current[A], PEX_3V3_power[W], AUX_3V3_voltage[V], AUX_3V3_current[A], VCCINT_voltage[V], VCCINT_current[A]
2024/09/04 14:10:08.088, 0, 12.062, 1.638, 19.758, 12.096, 1.468, 17.757, 37.514, 3.362, 0.000, 0.000, 3.322, 0.000, 0.851, 13.386
2024/09/04 14:10:09.088, 1000, 12.068, 1.633, 19.707, 12.100, 1.396, 16.892, 36.599, 3.366, 0.000, 0.000, 3.323, 0.000, 0.851, 13.266
2024/09/04 14:10:10.088, 2000, 12.056, 1.644, 19.820, 12.106, 1.403, 16.985, 36.805, 3.359, 0.000, 0.000, 3.330, 0.000, 0.851, 13.434
2024/09/04 14:10:11.088, 3000, 12.056, 1.637, 19.736, 12.092, 1.403, 16.965, 36.701, 3.366, 0.000, 0.000, 3.322, 0.000, 0.851, 13.266
2024/09/04 14:10:12.088, 4000, 12.056, 1.637, 19.736, 12.092, 1.403, 16.965, 36.701, 3.366, 0.000, 0.000, 3.322, 0.000, 0.851, 13.266
2024/09/04 14:10:13.089, 5000, 12.077, 1.630, 19.686, 12.122, 1.385, 16.789, 36.474, 3.363, 0.000, 0.000, 3.324, 0.000, 0.851, 13.482
2024/09/04 14:10:14.089, 6001, 12.080, 1.631, 19.702, 12.123, 1.418, 17.190, 36.893, 3.362, 0.000, 0.000, 3.325, 0.000, 0.851, 13.410
2024/09/04 14:10:15.089, 7001, 12.080, 1.631, 19.702, 12.123, 1.418, 17.190, 36.893, 3.362, 0.000, 0.000, 3.325, 0.000, 0.851, 13.410
2024/09/04 14:10:16.089, 8001, 12.083, 1.627, 19.659, 12.091, 1.396, 16.879, 36.538, 3.373, 0.000, 0.000, 3.323, 0.000, 0.851, 13.314
2024/09/04 14:10:17.089, 9001, 12.077, 1.625, 19.625, 12.100, 1.424, 17.230, 36.856, 3.352, 0.000, 0.000, 3.322, 0.000, 0.851, 13.386
^C
```
